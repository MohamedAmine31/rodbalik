<div class="content">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-left">
      <div class="header-icon-wrapper">
        <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
          <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
        </svg>
      </div>
      <div>
        <h1 class="page-title">Gestion des Utilisateurs</h1>
        <p class="page-subtitle">Liste de tous les utilisateurs du système</p>
      </div>
    </div>
    <div class="header-stats">
      <div class="stat-card">
        <span class="stat-label">Total</span>
        <span class="stat-value">{{ users.length }}</span>
      </div>
    </div>
  </div>


  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner-large"></div>
    <p class="loading-text">Chargement des utilisateurs...</p>
  </div>

  <!-- Users Table -->
  <div *ngIf="!isLoading && users.length > 0" class="data-card">
    <div class="card-header-modern">
      <div>
        <h2 class="card-title-modern">Utilisateurs</h2>
        <p class="card-description-modern">{{ users.length }} utilisateur(s) enregistré(s)</p>
      </div>
    </div>

    <div class="table-wrapper">
      <table class="modern-table">
        <thead>
          <tr>
           
            <th>
              <div class="th-content">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                </svg>
                <span>Utilisateur</span>
              </div>
            </th>
            <th>
              <div class="th-content">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                  <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                </svg>
                <span>Email</span>
              </div>
            </th>
            <th>
              <div class="th-content">
                <span>Nom complet</span>
              </div>
            </th>
            <th>
              <div class="th-content">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                  <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                </svg>
                <span>Rôle</span>
              </div>
            </th>
            <th>
              <div class="th-content">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                <span>Téléphone</span>
              </div>
            </th>
            <th>
              <div class="th-content">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                </svg>
                <span>Date de création</span>
              </div>
            
        </thead>
        <tbody>
          <tr *ngFor="let user of users" class="table-row">
           
            <td>
              <div class="user-info">
                <div class="user-avatar">
                  {{ getUserInitials(user) }}
                </div>
                <span class="user-name">{{ user.username }}</span>
              </div>
            </td>
            <td>
              <span class="user-email">{{ user.email }}</span>
            </td>
            <td>
              <span class="user-fullname">{{ user.first_name }} {{ user.last_name }}</span>
            </td>
            <td>
              <span class="role-badge" [ngClass]="getRoleBadgeClass(user.role)">
                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                  <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                </svg>
                {{ getRoleLabel(user.role) }}
              </span>
            </td>
            <td>
              <span class="user-phone">{{ user.phone || '-' }}</span>
            </td>
            <td>
              <span class="user-date">{{ user.created_at | date:'dd/MM/yyyy HH:mm' }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && users.length === 0" class="empty-state-modern">
    <div class="empty-icon-wrapper">
      <svg width="80" height="80" viewBox="0 0 20 20" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
      </svg>
    </div>
    <h3 class="empty-title">Aucun utilisateur trouvé</h3>
    <p class="empty-description">
      Il n'y a aucun utilisateur enregistré dans le système pour le moment.
    </p>
  </div>
</div>